{% extends 'TooBigAppBundle::page-with-header.html.twig' %}

{% block title %}Список предложенных по подписке объявлений{% endblock %}

{% block page_header %}
    <div class="page-header">
        <h1>Подписка "{{ subscription.title }}"</h1><small>Список предложенных по подписке объявлений</small>
    </div>
{% endblock page_header %}

{% block breadcrumbs %}
    <div class="breadcrumbs">
        <span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb" class="breadcrumbs-item"><a href="/" class="breadcrumbs-item-link link" itemprop="url"><span itemprop="title">Главная</span></a></span>
        <span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb" class="breadcrumbs-item"><a itemprop="url" class="breadcrumbs-item-link link"><span itemprop="title">Список объявлений по подписке</span></a></span>
    </div>
{% endblock breadcrumbs %}

{% block page_body %}

{% if entities is defined and entities %}
    {% block entity_list%}
        <div id="my-item-list">
            <div class="row heading">
                <div class="col-md-1">
                </div>
                <div class="col-md-4">
                    Наименование
                </div>
                <div class="col-md-1">
                    Бренд/Модель
                </div>
                <div class="col-md-1">
                    Размер/Тип
                </div>
                <div class="col-md-1">
                    Пол
                </div>
                <div class="col-md-1">
                    Стоимость,<br/>руб.
                </div>
                <div class="col-md-3">
                    Операции
                </div>
            </div>
        {% for entity in entities %}

                {% block entity_list_entry %}
                    <div class="row item">
                        <div class="col-md-1">
                        {% block entity_list_entry_image  %}
                            {% if entity.imagesMedia | length %}
                               <a href="{{ entitypath(entity) }}"><img src="{% path entity.imagesMedia[0].media, 'small' %}"></a>
                            {% elseif (entity.blueimpImages is defined) and entity.blueimpImages | length %}
                               <a href="{{ path('app_item_edit', {'item_id': entity.id}) }}"><img src="/uploads/attachments/{{ entity.id }}/thumbnails/{{ entity.blueimpImages[0].name }}"></a>
                            {% endif %}
                        {% endblock entity_list_entry_image  %}
                        </div>
                        {% block entity_list_entry_title  %}
                            <div class="col-md-4">
                                {% block entity_list_entry_link  %}
                                    <div>
                                        <a href="{{ entitypath(entity) }}">{{ entity }}</a>
                                    </div>
                                {% endblock entity_list_entry_link  %}
                                {% block entity_list_entry_announce  %}
                                    <div>
                                        {{ entity.abstract is defined ? entity.abstract | raw  : '' }}
                                        {{ entity.description is defined ? entity.description | raw : '' }}
                                        {{ entity.announce is defined ? entity.announce | raw : '' }}
                                        Цена: {{ entity.price is defined ? entity.price | raw : '0' }} руб.
                                    </div>
                                {% endblock entity_list_entry_announce  %}

                            </div>
                        {% endblock entity_list_entry_title  %}
                        {% block entity_list_entry_brand  %}
                            <div class="col-md-1">
                                <span class="item-brand">
                                    {{ entity.brand is defined ? entity.brand | raw  : '' }}
                                    {% if entity.model is defined and entity.model is not null %} / {{ entity.model | raw }}{% endif %}
                                </span>
                            </div>
                        {% endblock entity_list_entry_brand  %}
                        {% block entity_list_entry_size  %}
                            <div class="col-md-1">
                                <span class="item-size">
                                    {{ entity.size_type is defined ? entity.size_type | raw : '' }}
                                    {% if entity.size is defined and entity.size is not null %} / {{ entity.size | raw }}{% endif %}
                                </span>
                            </div>
                        {% endblock entity_list_entry_size  %}
                        {% block entity_list_entry_gender  %}
                            <div class="col-md-1">
                                <span class="item-gender">
                                    {% if entity.gender is defined %}
                                        {%  if entity.gender == 'm' %}
                                            Мальчик
                                        {%  elseif entity.gender == 'f' %}
                                            Девочка
                                        {%  elseif entity.gender == 'u' %}
                                            Унисекс
                                        {%  endif %}
                                    {%  endif %}
                                </span>
                            </div>
                        {% endblock entity_list_entry_gender  %}

                        {% block entity_list_entry_price  %}
                            <div class="col-md-1">
                                <span class="item-price">{{ entity.price | raw }}</span>
                            </div>
                        {% endblock entity_list_entry_price  %}

                        <div class="col-md-3">
                            {{ render(controller('TooBigAppBundle:Item:watchStatus', {
                                'item_id': entity.id
                            })) }}
                        </div>

                    </div>
                {% endblock entity_list_entry%}

        {% endfor %}
        </div>
    {% endblock entity_list%}


    {% block pagination %}
        {% include 'IphpCoreBundle::pagination.html.twig' with {'entities': entities} %}
    {% endblock pagination %}

{% endif%}

{% endblock page_body %}