{% extends 'TooBigAppBundle::page-with-header.html.twig' %}

{% block title %}Список наблюдаемых объявлений{% endblock %}

{% block breadcrumbs %}

{% endblock breadcrumbs %}

{% block page_header %}
    {% block crumbs %}
        <div class="breadcrumbs">
            <span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb" class="breadcrumbs-item"><a href="{{ rpath ('/') }}" class="breadcrumbs-item-link link" itemprop="url"><span itemprop="title">Главная</span></a></span>
            <span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb" class="breadcrumbs-item"><a itemprop="url" class="breadcrumbs-item-link link"><span itemprop="title">Избранные объявления</span></a></span>
        </div>
    {% endblock crumbs %}
{% endblock page_header %}

{% block page_body %}

{% if entities is defined and entities | length > 0 %}
    {% block entity_list%}
        <div id="my-item-list">
            <div class="row heading">
                <div class="col-md-1">
                </div>
                <div class="col-md-5">
                    Наименование
                </div>
                <div class="col-md-2">
                    Статус
                </div>
                <div class="col-md-2">
                    Обновление от
                </div>
                <div class="col-md-2">
                    Операции
                </div>
            </div>
        {% for entity in entities %}

                {% block entity_list_entry %}
                    <div class="row item">
                        <div class="col-md-1">
                        {% block entity_list_entry_image  %}
                            {% if entity.item.imagesMedia | length %}
                                <a {% if entity.item.enabled %}href="{{ entitypath(entity.item) }}"{% endif %}>
                                   <img src="{% path entity.item.imagesMedia[0].media, 'small' %}">
                                </a>
                            {% elseif (entity.item.blueimpImages is defined) and entity.item.blueimpImages | length %}
                                <a {% if entity.item.enabled %}href="{{ entitypath(entity.item) }}"{% endif %}>
                                   <img src="/uploads/attachments/{{ entity.item.id }}/thumbnails/{{ entity.item.blueimpImages[0].name }}">
                                </a>
                            {% endif %}
                        {% endblock entity_list_entry_image  %}
                        </div>
                        {% block entity_list_entry_title  %}
                            <div class="col-md-5">
                                {% block entity_list_entry_link  %}
                                    <div>
                                        <a {% if entity.item.enabled %}href="{{ entitypath(entity.item) }}"{% endif %}>
                                            {{ entity.item }}
                                        </a>
                                    </div>
                                {% endblock entity_list_entry_link  %}
                                {% block entity_list_entry_announce  %}
                                    <div>
                                        {{ entity.item.abstract is defined ? entity.item.abstract | raw  : '' }}
                                        {{ entity.item.description is defined ? entity.item.description | raw : '' }}
                                        {{ entity.item.announce is defined ? entity.item.announce | raw : '' }}
                                        Цена: {{ entity.item.price is defined ? entity.item.price | raw : '0' }} руб.
                                    </div>
                                {% endblock entity_list_entry_announce  %}

                            </div>
                        {% endblock entity_list_entry_title  %}
                        {% block entity_list_entry_enabled  %}
                            <div class="col-md-2">
                                <span class="item-enabled-{{ entity.item.enabled }}">
                                    {% if entity.item.enabled %}
                                        <i class="glyphicon glyphicon-ok-circle"></i>
                                    {% else %}
                                        <i class="glyphicon glyphicon-remove-circle"></i>
                                    {% endif %}
                                </span>
                            </div>
                        {% endblock entity_list_entry_enabled  %}

                        {% block entity_list_entry_editedAt  %}
                            <div class="col-md-2">
                                <span class="item-editedAt">{{ entity.item.editedAt | date("d.m.Y H:i:s") }}</span>
                            </div>
                        {% endblock entity_list_entry_editedAt  %}

                        <div class="col-md-2"><a class="a-unwatch-item btn btn-warning" path-controller="{{ path('app_item_unwatch', {'item_id': entity.item.id}) }}">Отменить</a></div>

                    </div>
                {% endblock entity_list_entry%}

        {% endfor %}
        </div>
    {% endblock entity_list%}


    {% block pagination %}
        {% include 'IphpCoreBundle::pagination.html.twig' with {'entities': entities} %}
    {% endblock pagination %}

{% elseif entities is defined and entities | length == 0 %}
    У вас еще нет в списке ни одного объявления.
{% endif %}

{% endblock page_body %}